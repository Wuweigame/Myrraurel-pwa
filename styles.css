/* =============================================
MYRR’AUREL — TOME GENERATOR
Aesthetic: Dark grimoire, aged parchment meets
cold arcane geometry. Cinzel + Crimson Pro.
============================================= */

:root {
–bg:       #08070a;
–bg2:      #0d0c11;
–panel:    #100f14;
–panel2:   #13121a;
–border:   #2a2535;
–border2:  #3d3650;
–text:     #ddd8c8;
–text2:    #a89f8a;
–muted:    #6b6375;
–accent:   #c9a86c;
–accent2:  #a07840;
–danger:   #a85050;
–danger2:  #7a3535;
–alive:    #8a6fba;
–alive2:   #c9b6f0;
–green:    #6a9e7e;
–shadow:   rgba(0,0,0,0.7);

–font-display: ‘Cinzel’, Georgia, serif;
–font-body:    ‘Crimson Pro’, Garamond, Georgia, serif;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { font-size: 16px; }

body {
font-family: var(–font-body);
font-size: 1rem;
background: var(–bg);
color: var(–text);
min-height: 100vh;
overflow-x: hidden;
position: relative;
}

/* –– Atmospheric effects –– */
.scanlines {
position: fixed;
inset: 0;
pointer-events: none;
z-index: 1000;
background: repeating-linear-gradient(
0deg,
transparent,
transparent 2px,
rgba(0,0,0,0.03) 2px,
rgba(0,0,0,0.03) 4px
);
}

.vignette {
position: fixed;
inset: 0;
pointer-events: none;
z-index: 999;
background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.6) 100%);
}

/* –– Header –– */
header {
border-bottom: 1px solid var(–border);
background: linear-gradient(180deg, #0f0e14 0%, var(–bg) 100%);
position: sticky;
top: 0;
z-index: 100;
backdrop-filter: blur(12px);
}

.header-inner {
max-width: 1600px;
margin: 0 auto;
padding: 14px 20px;
display: flex;
align-items: center;
gap: 16px;
}

.glyph-mark {
font-size: 28px;
color: var(–accent);
opacity: 0.8;
line-height: 1;
animation: glyphPulse 4s ease-in-out infinite;
}

@keyframes glyphPulse {
0%, 100% { opacity: 0.6; text-shadow: none; }
50% { opacity: 1; text-shadow: 0 0 20px rgba(201,168,108,0.5); }
}

.header-text { flex: 1; }

h1 {
font-family: var(–font-display);
font-size: 1.5rem;
font-weight: 700;
letter-spacing: 3px;
color: var(–accent);
text-shadow: 0 0 30px rgba(201,168,108,0.3);
line-height: 1;
}

.sub {
font-size: 0.75rem;
color: var(–muted);
letter-spacing: 1.5px;
text-transform: uppercase;
margin-top: 4px;
font-family: var(–font-display);
font-weight: 400;
}

/* –– Clock bar –– */
.clocks-bar {
display: flex;
gap: 24px;
}

.clock-group {
display: flex;
flex-direction: column;
align-items: flex-end;
gap: 5px;
}

.clock-label {
font-family: var(–font-display);
font-size: 0.6rem;
letter-spacing: 2px;
text-transform: uppercase;
color: var(–muted);
}

.pips {
display: flex;
gap: 5px;
}

.pip {
width: 10px;
height: 10px;
border-radius: 50%;
border: 1px solid var(–border2);
background: transparent;
transition: background 0.4s, box-shadow 0.4s;
}

.pip.filled-attention {
background: var(–accent);
border-color: var(–accent);
box-shadow: 0 0 8px rgba(201,168,108,0.6);
}

.pip.filled-contamination {
background: var(–alive);
border-color: var(–alive);
box-shadow: 0 0 8px rgba(138,111,186,0.6);
}

/* –– Layout –– */
main.grid {
max-width: 1600px;
margin: 0 auto;
display: grid;
gap: 12px;
padding: 16px;
grid-template-columns: 1fr;
}

@media (min-width: 900px) {
main.grid {
grid-template-columns: 320px 1fr;
}
.panel-ledger {
grid-column: 1 / -1;
}
}

@media (min-width: 1280px) {
main.grid {
grid-template-columns: 300px 1fr 380px;
}
.panel-ledger {
grid-column: unset;
}
}

/* –– Panels –– */
.panel {
background: var(–panel);
border: 1px solid var(–border);
border-radius: 12px;
padding: 18px;
position: relative;
overflow: hidden;
}

.panel::before {
content: ‘’;
position: absolute;
top: 0; left: 0; right: 0;
height: 1px;
background: linear-gradient(90deg, transparent, var(–border2), transparent);
}

.panel-title {
font-family: var(–font-display);
font-size: 0.75rem;
font-weight: 600;
letter-spacing: 3px;
text-transform: uppercase;
color: var(–text2);
margin-bottom: 16px;
display: flex;
align-items: center;
gap: 10px;
}

.panel-rune {
color: var(–accent);
font-size: 0.7rem;
opacity: 0.7;
}

/* –– Form fields –– */
.field {
margin-bottom: 12px;
}

.field label {
display: block;
font-family: var(–font-display);
font-size: 0.6rem;
letter-spacing: 2px;
text-transform: uppercase;
color: var(–muted);
margin-bottom: 6px;
}

.select-wrap {
position: relative;
}

.select-wrap::after {
content: ‘▾’;
position: absolute;
right: 12px;
top: 50%;
transform: translateY(-50%);
color: var(–accent);
pointer-events: none;
font-size: 12px;
}

select, .search-input {
width: 100%;
padding: 9px 12px;
background: var(–bg2);
border: 1px solid var(–border);
border-radius: 8px;
color: var(–text);
font-family: var(–font-body);
font-size: 0.95rem;
appearance: none;
transition: border-color 0.2s, box-shadow 0.2s;
outline: none;
}

select:focus, .search-input:focus {
border-color: var(–accent2);
box-shadow: 0 0 0 2px rgba(201,168,108,0.15);
}

.search-input {
margin-bottom: 12px;
}

/* –– Range slider –– */
.range-track {
position: relative;
padding-bottom: 4px;
}

input[type=“range”] {
width: 100%;
height: 4px;
appearance: none;
background: var(–border);
border-radius: 2px;
outline: none;
cursor: pointer;
}

input[type=“range”]::-webkit-slider-thumb {
appearance: none;
width: 16px;
height: 16px;
border-radius: 50%;
background: var(–accent);
border: 2px solid var(–bg);
box-shadow: 0 0 8px rgba(201,168,108,0.5);
cursor: pointer;
transition: box-shadow 0.2s;
}

input[type=“range”]::-webkit-slider-thumb:hover {
box-shadow: 0 0 16px rgba(201,168,108,0.7);
}

.risk-val {
display: inline-block;
margin-left: 6px;
font-family: var(–font-display);
color: var(–accent);
font-size: 0.9rem;
min-width: 1ch;
}

/* –– Mode toggle –– */
.mode-toggle {
background: var(–bg2);
border: 1px solid var(–border);
border-radius: 10px;
padding: 12px;
margin: 14px 0;
}

.mode-label {
font-family: var(–font-display);
font-size: 0.6rem;
letter-spacing: 2px;
text-transform: uppercase;
color: var(–muted);
display: block;
margin-bottom: 8px;
}

.toggle-group {
display: flex;
border: 1px solid var(–border);
border-radius: 7px;
overflow: hidden;
margin-bottom: 8px;
}

.toggle-btn {
flex: 1;
padding: 7px 4px;
border: none;
background: transparent;
color: var(–muted);
font-family: var(–font-display);
font-size: 0.6rem;
letter-spacing: 1px;
text-transform: uppercase;
cursor: pointer;
transition: background 0.2s, color 0.2s;
}

.toggle-btn.active {
background: var(–accent2);
color: var(–bg);
}

.toggle-btn:not(.active):hover {
background: var(–border);
color: var(–text);
}

.mode-desc {
font-size: 0.8rem;
color: var(–muted);
font-style: italic;
line-height: 1.4;
}

/* –– Buttons –– */
.actions {
display: flex;
flex-wrap: wrap;
gap: 8px;
margin-bottom: 12px;
}

.actions-util {
margin-top: 4px;
}

.btn {
padding: 9px 14px;
border-radius: 8px;
border: 1px solid var(–border);
background: var(–bg2);
color: var(–text2);
font-family: var(–font-display);
font-size: 0.65rem;
letter-spacing: 1.5px;
text-transform: uppercase;
cursor: pointer;
transition: all 0.2s;
display: inline-flex;
align-items: center;
gap: 6px;
white-space: nowrap;
}

.btn:hover { border-color: var(–border2); color: var(–text); }
.btn:disabled { opacity: 0.4; cursor: not-allowed; }

.btn-primary {
background: linear-gradient(135deg, #201a0e, #2a2010);
border-color: var(–accent2);
color: var(–accent);
flex: 1;
}
.btn-primary:hover {
background: linear-gradient(135deg, #2a2210, #3a2d15);
box-shadow: 0 0 20px rgba(201,168,108,0.2);
}
.btn-primary .btn-rune { font-size: 10px; }

.btn-accent {
background: linear-gradient(135deg, #1a1a10, #22220e);
border-color: var(–green);
color: var(–green);
}
.btn-accent:hover { box-shadow: 0 0 16px rgba(106,158,126,0.2); }

.btn-secondary { }

.btn-util { font-size: 0.58rem; padding: 7px 10px; }

.btn-danger {
border-color: var(–danger2);
color: var(–danger);
}
.btn-danger:hover { border-color: var(–danger); }

.btn-clock {
border-color: var(–border);
color: var(–muted);
}

.fileBtn input { display: none; }

.divider {
border-top: 1px solid var(–border);
margin: 14px 0;
}

.clock-controls {
display: flex;
align-items: center;
gap: 10px;
margin-top: 6px;
}

.hint {
font-size: 0.78rem;
color: var(–muted);
font-style: italic;
}

.install-hint {
font-size: 0.8rem;
color: var(–muted);
margin-top: 14px;
padding: 10px;
border: 1px dashed var(–border);
border-radius: 8px;
line-height: 1.5;
}

.install-hint em {
color: var(–accent);
font-style: normal;
}

/* –– Tome output –– */
.output {
min-height: 200px;
}

.empty-state {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
text-align: center;
padding: 40px 20px;
gap: 12px;
color: var(–muted);
}

.empty-glyph {
font-size: 48px;
opacity: 0.2;
animation: glyphPulse 4s ease-in-out infinite;
}

.card-enter {
animation: cardReveal 0.5s ease-out forwards;
}

@keyframes cardReveal {
from { opacity: 0; transform: translateY(10px); }
to   { opacity: 1; transform: translateY(0); }
}

.card-title {
font-family: var(–font-display);
font-size: 1.1rem;
font-weight: 600;
color: var(–accent);
line-height: 1.3;
margin-bottom: 10px;
text-shadow: 0 0 20px rgba(201,168,108,0.2);
}

.badges {
display: flex;
flex-wrap: wrap;
gap: 6px;
margin-bottom: 14px;
}

.badge {
font-family: var(–font-display);
font-size: 0.58rem;
letter-spacing: 1.5px;
text-transform: uppercase;
padding: 4px 9px;
border: 1px solid var(–border2);
border-radius: 999px;
color: var(–text2);
background: var(–bg2);
}

.badge.badge-risk-high {
border-color: var(–danger2);
color: var(–danger);
}

.badge.badge-depth-black {
border-color: var(–alive);
color: var(–alive2);
}

.section-label {
font-family: var(–font-display);
font-size: 0.6rem;
letter-spacing: 2px;
text-transform: uppercase;
color: var(–muted);
margin: 14px 0 6px;
display: flex;
align-items: center;
gap: 8px;
}

.section-label::after {
content: ‘’;
flex: 1;
height: 1px;
background: var(–border);
}

.card-meta p {
font-size: 0.9rem;
color: var(–text2);
line-height: 1.5;
margin-bottom: 4px;
}

.card-meta b {
color: var(–text);
font-weight: 400;
}

.excerpt {
font-style: italic;
color: var(–text);
line-height: 1.7;
font-size: 0.98rem;
padding: 12px;
background: var(–bg2);
border-left: 2px solid var(–accent2);
border-radius: 0 8px 8px 0;
}

.dm-block {
margin-top: 10px;
}

.dm-block summary {
cursor: pointer;
font-family: var(–font-display);
font-size: 0.65rem;
letter-spacing: 2px;
text-transform: uppercase;
color: var(–alive2);
padding: 10px;
background: var(–bg2);
border: 1px solid var(–border);
border-radius: 8px;
list-style: none;
display: flex;
align-items: center;
gap: 8px;
transition: background 0.2s;
}

.dm-block summary:hover { background: var(–panel2); }
.dm-block summary::marker { display: none; }
.dm-block summary::before { content: ‘▶’; font-size: 8px; color: var(–alive); }
details[open] .dm-block summary::before { content: ‘▼’; }

.dm-inner {
padding: 12px;
border: 1px solid var(–border);
border-top: none;
border-radius: 0 0 8px 8px;
background: #0c0b10;
}

.dm-row {
display: grid;
grid-template-columns: 120px 1fr;
gap: 8px;
margin-bottom: 8px;
font-size: 0.9rem;
line-height: 1.5;
}

.dm-row:last-child { margin-bottom: 0; }

.dm-key {
font-family: var(–font-display);
font-size: 0.6rem;
letter-spacing: 1.5px;
text-transform: uppercase;
color: var(–muted);
padding-top: 2px;
}

.dm-val { color: var(–text); }

.consequence-pill {
display: inline-flex;
align-items: center;
gap: 6px;
padding: 5px 10px;
background: var(–bg);
border: 1px solid var(–border2);
border-radius: 8px;
font-size: 0.85rem;
color: var(–alive2);
}

/* –– Ledger –– */
.ledger {
display: grid;
gap: 8px;
max-height: 60vh;
overflow-y: auto;
padding-right: 4px;
}

.ledger::-webkit-scrollbar { width: 4px; }
.ledger::-webkit-scrollbar-track { background: transparent; }
.ledger::-webkit-scrollbar-thumb { background: var(–border2); border-radius: 2px; }

.ledger-item {
background: var(–bg2);
border: 1px solid var(–border);
border-radius: 8px;
padding: 11px 13px;
transition: border-color 0.2s;
cursor: default;
}

.ledger-item:hover { border-color: var(–border2); }

.ledger-title {
font-family: var(–font-display);
font-size: 0.8rem;
color: var(–accent);
line-height: 1.3;
margin-bottom: 5px;
}

.ledger-meta {
font-size: 0.8rem;
color: var(–muted);
line-height: 1.5;
}

.ledger-empty {
color: var(–muted);
font-style: italic;
text-align: center;
padding: 24px;
font-size: 0.9rem;
}

/* –– Footer –– */
footer {
border-top: 1px solid var(–border);
padding: 14px 20px;
text-align: center;
color: var(–muted);
font-size: 0.75rem;
letter-spacing: 0.5px;
}

/* –– Responsive tweaks –– */
@media (max-width: 480px) {
h1 { font-size: 1.2rem; }
.clocks-bar { display: none; }
header { padding: 10px; }
main.grid { padding: 10px; gap: 10px; }
}

/* –– Clock consequence flash –– */
@keyframes consequenceFlash {
0% { box-shadow: 0 0 0 0 rgba(201,168,108,0.7); }
70% { box-shadow: 0 0 0 12px transparent; }
100% { box-shadow: none; }
}

.pip.just-filled {
animation: consequenceFlash 0.8s ease-out;
}

/* –– Alive mode panel tint –– */
body.mode-alive .panel-controls {
border-color: #2d2445;
}

body.mode-alive .glyph-mark {
color: var(–alive2);
}
